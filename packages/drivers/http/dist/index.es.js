var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},asyncToGenerator=function(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){return function r(o,a){try{var u=e[o](a),i=u.value}catch(t){return void n(t)}if(!u.done)return Promise.resolve(i).then(function(t){r("next",t)},function(t){r("throw",t)});t(i)}("next")})}},_extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},toConsumableArray=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)},_this=void 0,dispatchFactory=function(t){return function(e){return function(n){return function(r,o,a,u){return t.dispatch({type:"@@http/"+e+">"+n+">"+r,payload:o,status:a,fetch:u})}}}},http=function(t){var e={},n=function(n){var r,o=(r=asyncToGenerator(regeneratorRuntime.mark(function r(o){for(var a=arguments.length,u=Array(a>2?a-2:0),i=2;i<a;i++)u[i-2]=arguments[i];var s,c,f,y,d,p,h,l,v,b,m=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return s=m.method,c=void 0===s?"GET":s,f=_extends({},e,m.headers),y=_extends({},m,{headers:f}),d=dispatchFactory(t)(n)(c),p=void 0,h=void 0,l=[o,y].concat(toConsumableArray(u)),d("STARTED",void 0,void 0,l),r.prev=8,r.next=11,(v=global||window).fetch.apply(v,toConsumableArray(l));case 11:if(h=r.sent,p=h,!(h.headers&&h.headers.get("Content-Type")&&h.headers.get("Content-Type").includes("json"))){r.next=17;break}return r.next=16,h.json();case 16:p=r.sent;case 17:r.next=23;break;case 19:return r.prev=19,r.t0=r.catch(8),d("FAILED",r.t0,(h||{}).status,l),r.abrupt("return",r.t0);case 23:return b=h.status,d(b>=400||b<200?"FAILED":"ENDED",p,b),r.abrupt("return",p);case 26:case"end":return r.stop()}},r,_this,[[8,19]])})),function(t){return r.apply(this,arguments)});return["GET","POST","HEAD","PUT","DELETE","OPTIONS","CONNECT"].forEach(function(t){o[t.toLowerCase()]=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.headers,u=void 0===a?{}:a,i=r;return n&&["object","array"].includes(void 0===n?"undefined":_typeof(n))&&(u["Content-Type"]||(i=_extends({},i,{headers:_extends({},u,{"Content-Type":"application/json"})})),i=_extends({},i,{body:JSON.stringify(n)})),i=_extends({},i,{method:t}),o(e,i)}}),o};return n.setAuthorization=function(t){e.Authorization=t},n};export default http;
//# sourceMappingURL=index.es.js.map
