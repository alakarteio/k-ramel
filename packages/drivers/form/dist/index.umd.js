!function(r,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("k-ramel")):"function"==typeof define&&define.amd?define(["k-ramel"],e):r["@k-ramel/form"]=e(null)}(this,function(r){"use strict";var e=function(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r},n=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(r[t]=n[t])}return r};return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},u=t.path,o=void 0===u?"form":u,i=t.getState,a=void 0===i?function(r){return r.form}:i,f=t.key,c=void 0===f?"@@form-name":f;return{getReducer:function(){return{path:o,reducer:{values:r.types.keyValue({key:c}),errors:r.types.keyValue({key:c})}}},getDriver:function(r){var t=a(r);return Object.assign(function(r){return n({},function(r){return function(t){return function(u){var o=function(o){return function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t[o].addOrUpdate(n(e({},r,u),i))}};return{set:o("values"),setErrors:o("errors"),clearErrors:function(){return t.errors.reset(u)},update:function(n){return function(o){var i;return t.values.update((e(i={},r,u),e(i,n,o),i))}},remove:function(){t.values.remove(u),t.errors.remove(u)}}}}}(c)(t)(r),function(r){return function(e){return function(t){var u=function(u){return function(o){var i=e[u].get(t);if(!o&&i){var a=n({},i);return delete a[r],a}return i&&i[o]||""}};return{exists:function(){return!!e.values.get(t)},get:u("values"),getErrors:u("errors")}}}}(c)(t)(r))},function(r){return function(t){var u=function(u){return function(o){return t[u].addOrUpdate(o.map(function(t){var u=t.name,o=t.values;return n({},o,e({},r,u))}))}};return{set:u("values"),setErrors:u("errors"),clearErrors:t.errors.remove,remove:function(r){t.values.remove(r),t.errors.remove(r)}}}}(c)(t),function(r){return{find:function(e){return r.values.getKeys().filter(function(r){return r.match(e)})}}}(t))}}}});
