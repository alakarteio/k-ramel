!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r(require("k-ramel")):"function"==typeof define&&define.amd?define(["k-ramel"],r):e["@k-ramel/form"]=r(null)}(this,function(e){"use strict";var r=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},t=function(e){return function(t){return{set:function(n){return function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e[n].addOrUpdate(r({form:t},o))}},reset:function(r){return function(){return e[r].reset(t)}},onChange:function(r){return function(n){return e.values.addOrUpdate(function(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}({form:t},r,n))}},destroy:function(){e.values.remove(t),e.errors.remove(t)}}}};return function(r){var n=r.path,o=void 0===n?"form":n,u=r.getState,i=void 0===u?function(e){return e.form}:u;return{getReducer:function(){return{path:o,reducer:{values:e.keyValue({key:"form"}),errors:e.keyValue({key:"form"})}}},getDriver:function(e){return function(r){var n=i(e),o=t(n)(r),u=o.set,f=o.reset,a=o.onChange,s=o.destroy,c=function(e){return function(r){return{exists:function(){return!!e.values.get(r)},get:function(t){return function(n){var o=e[t].get(r);return!n&&o?(delete o.form,o):o&&o[n]||""}}}}}(n)(r),l=c.exists,d=c.get;return{exists:l,init:u("values"),destroy:s,get:d("values"),set:u("values"),onChange:a,setErrors:u("errors"),getErrors:d("errors"),clearErrors:f("errors")}}}}}});
