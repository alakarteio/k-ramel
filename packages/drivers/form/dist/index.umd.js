!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r(require("k-ramel")):"function"==typeof define&&define.amd?define(["k-ramel"],r):e["@k-ramel/form"]=r(null)}(this,function(e){"use strict";var r=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},t=function(e){return function(t){return{set:function(n){return function(){var u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e[n].addOrUpdate(r({id:t},u))}},reset:function(r){return function(){return e[r].reset(t)}},onChange:function(r){return function(n){return e.values.addOrUpdate(function(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}({id:t},r,n))}},destroy:function(){e.values.remove(t),e.errors.remove(t)}}}},n=function(e){return function(r){return{exists:function(){return!!e.values.get(r)},get:function(t){return function(n){var u=e[t].get(r);if(!n&&u){u.id;return function(e,r){var t={};for(var n in e)r.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}(u,["id"])}return u&&u[n]||""}}}}};return function(r){var u=r.path,o=void 0===u?"form":u,i=r.getState,a=void 0===i?function(e){return e.form}:i;return{getReducer:function(){return{path:o,reducer:{values:e.types.keyValue(),errors:e.types.keyValue()}}},getDriver:function(e){return function(r){var u=a(e),o=t(u)(r),i=o.set,f=o.reset,s=o.onChange,c=o.destroy,d=n(u)(r),l=d.exists,v=d.get;return{exists:l,init:i("values"),destroy:c,get:v("values"),set:i("values"),onChange:s,setErrors:i("errors"),getErrors:v("errors"),clearErrors:f("errors")}}}}}});
