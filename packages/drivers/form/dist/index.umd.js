!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r(require("k-ramel")):"function"==typeof define&&define.amd?define(["k-ramel"],r):(e=e||self)["@k-ramel/driver-form"]=r(e.kRamel)}(this,function(e){"use strict";function r(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function n(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},u=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(u=u.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),u.forEach(function(n){r(e,n,t[n])})}return e}return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},u=t.path,o=void 0===u?"form":u,c=t.getState,i=void 0===c?function(e){return e.form}:c,f=t.key,a=void 0===f?"@@form":f,s="".concat(a,"-name");return{getReducer:function(){return{path:o,reducer:{values:e.types.keyValue({key:s}),errors:e.types.keyValue({key:s})}}},getDriver:function(e){var t=i(e);return Object.assign(function(e){return n({},function(e){return function(t){return function(u){var o="".concat(e,"-name"),c="".concat(e,"-fields"),i=function(e){return function(){var i,f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t[e].addOrUpdate(n({},f,(r(i={},o,u),r(i,c,Object.keys(f)),i)))}};return{set:i("values"),setErrors:i("errors"),update:function(e){return function(n){var i;return t.values.update((r(i={},o,u),r(i,c,[e]),r(i,e,n),i))}},clearErrors:function(){return t.errors.reset(u)},remove:function(){t.values.remove(u),t.errors.remove(u)}}}}}(a)(t)(e),function(e){return function(r){return function(t){var u=function(u){return function(o){var c=r[u].get(t);if(!c)return o?"":{};if(!o&&c){var i=n({},c);return delete i[e],i}var f=c[o];return null==f?"":f}};return{exists:function(){return!!r.values.get(t)},get:u("values"),getErrors:u("errors")}}}}(s)(t)(e))},function(e){return function(t){var u="".concat(e,"-name"),o="".concat(e,"-fields"),c=function(e){return function(c){return t[e].addOrUpdate(c.map(function(e){var t,c=e.name,i=e.values;return n({},i,(r(t={},u,c),r(t,o,Object.keys(i)),t))}))}};return{set:c("values"),setErrors:c("errors"),clearErrors:t.errors.remove,remove:function(e){t.values.remove(e),t.errors.remove(e)}}}}(a)(t),function(e){return{find:function(r){return e.values.getKeys().filter(function(e){return e.match(r)})}}}(t))}}}});
