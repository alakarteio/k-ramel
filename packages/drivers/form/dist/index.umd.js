!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r(require("k-ramel")):"function"==typeof define&&define.amd?define(["k-ramel"],r):e["@k-ramel/form"]=r(null)}(this,function(e){"use strict";var r=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},n=function(e){return function(n){var t=function(t){return function(){var u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e[t].addOrUpdate(r({name:n},u))}};return{init:t("values"),set:t("values"),setErrors:t("errors"),clearErrors:function(){return e.errors.reset(n)},onChange:function(r){return function(t){return e.values.addOrUpdate(function(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}({name:n},r,t))}},destroy:function(){e.values.remove(n),e.errors.remove(n)}}}},t=function(e){return function(r){var n=function(n){return function(t){var u=e[n].get(r);if(!t&&u){u.name;return function(e,r){var n={};for(var t in e)r.indexOf(t)>=0||Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n}(u,["name"])}return u&&u[t]||""}};return{exists:function(){return!!e.values.get(r)},get:n("values"),getErrors:n("errors")}}};return function(u){var o=u.path,a=void 0===o?"form":o,i=u.getState,f=void 0===i?function(e){return e.form}:i;return{getReducer:function(){return{path:a,reducer:{values:e.types.keyValue({key:"name"}),errors:e.types.keyValue({key:"name"})}}},getDriver:function(e){return function(u){var o=f(e);return r({},n(o)(u),t(o)(u))}}}}});
