import{types}from"k-ramel";var defineProperty=function(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r},_extends=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},objectWithoutProperties=function(r,e){var t={};for(var n in r)e.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n]);return t},actions=function(r){return function(e){var t=function(t){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r[t].addOrUpdate(_extends({name:e},n))}};return{init:t("values"),set:t("values"),setErrors:t("errors"),clearErrors:function(){return r.errors.reset(e)},onChange:function(t){return function(n){return r.values.addOrUpdate(defineProperty({name:e},t,n))}},destroy:function(){r.values.remove(e),r.errors.remove(e)}}}},selectors=function(r){return function(e){var t=function(t){return function(n){var o=r[t].get(e);if(!n&&o){o.name;return objectWithoutProperties(o,["name"])}return o&&o[n]||""}};return{exists:function(){return!!r.values.get(e)},get:t("values"),getErrors:t("errors")}}},form=function(r){var e=r.path,t=void 0===e?"form":e,n=r.getState,o=void 0===n?function(r){return r.form}:n;return{getReducer:function(){return{path:t,reducer:{values:types.keyValue({key:"name"}),errors:types.keyValue({key:"name"})}}},getDriver:function(r){return function(e){var t=o(r);return _extends({},actions(t)(e),selectors(t)(e))}}}};export default form;
