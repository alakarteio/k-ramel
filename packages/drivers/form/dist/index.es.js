import{types}from"k-ramel";var defineProperty=function(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e},_extends=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},actions=function(e){return function(r){return function(t){var n=function(n){return function(){var u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r[n].addOrUpdate(_extends(defineProperty({},e,t),u))}};return{set:n("values"),setErrors:n("errors"),clearErrors:function(){return r.errors.reset(t)},update:function(n){return function(u){var o;return r.values.update((defineProperty(o={},e,t),defineProperty(o,n,u),o))}},remove:function(){return r.values.remove(t)&&r.errors.remove(t)}}}}},selectors=function(e){return function(r){return function(t){var n=function(n){return function(u){var o=r[n].get(t);if(!u&&o){var i=_extends({},o);return delete i[e],i}return o&&o[u]||""}};return{exists:function(){return!!r.values.get(t)},get:n("values"),getErrors:n("errors")}}}},utils=function(e){return{find:function(r){return e.values.getKeys().filter(function(e){return e.match(r)})},remove:function(r){return e.values.remove(r)&&e.errors.remove(r)}}},form=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.path,t=void 0===r?"form":r,n=e.getState,u=void 0===n?function(e){return e.form}:n,o=e.key,i=void 0===o?"@@form-name":o;return{getReducer:function(){return{path:t,reducer:{values:types.keyValue({key:i}),errors:types.keyValue({key:i})}}},getDriver:function(e){var r=u(e);return Object.assign(function(e){return _extends({},actions(i)(r)(e),selectors(i)(r)(e))},utils(r))}}};export default form;
