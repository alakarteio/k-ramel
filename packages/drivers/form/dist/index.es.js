import{keyValue}from"k-ramel";var defineProperty=function(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r},_extends=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(r[t]=n[t])}return r},actions=function(r){return function(e){return function(n){var t=function(t){return function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e[t].addOrUpdate(_extends(defineProperty({},r,n),o))}};return{init:t("values"),set:t("values"),setErrors:t("errors"),clearErrors:function(){return e.errors.reset(n)},onChange:function(t){return function(o){var u;return e.values.addOrUpdate((defineProperty(u={},r,n),defineProperty(u,t,o),u))}},remove:function(){e.values.remove(n),e.errors.remove(n)}}}}},selectors=function(r){return function(e){return function(n){var t=function(t){return function(o){var u=e[t].get(n);if(!o&&u){var i=_extends({},u);return delete i[r],i}return u&&u[o]||""}};return{exists:function(){return!!e.values.get(n)},get:t("values"),getErrors:t("errors")}}}},form=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=r.path,n=void 0===e?"form":e,t=r.getState,o=void 0===t?function(r){return r.form}:t,u=r.key,i=void 0===u?"@@form-name":u;return{getReducer:function(){return{path:n,reducer:{values:keyValue({key:i}),errors:keyValue({key:i})}}},getDriver:function(r){return function(e){var n=o(r);return _extends({},actions(i)(n)(e),selectors(i)(n)(e))}}}};export default form;
