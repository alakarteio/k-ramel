{"version":3,"file":"index.umd.js","sources":["../src/reduxLittleRouter.js"],"sourcesContent":["import { routerForBrowser, push, replace, go, goBack, goForward, block, unblock, initializeCurrentLocation } from 'redux-little-router'\nimport { compose, applyMiddleware } from 'redux'\n\nconst getParentResultParam = (result, key) => {\n  if (!result) return undefined\n  if (result[key]) return result[key]\n  return getParentResultParam(result.parent, key)\n}\n\nconst isParentResultParam = (result, key, value) => {\n  if (!result) return false\n  if (result[key] === value) return true\n  return isParentResultParam(result.parent, key, value)\n}\n\nconst isRouterImpl = ({ reducer, middleware, enhancer }) => reducer && enhancer && middleware\n\nconst getDriver = selector => ({ dispatch, getState }) => {\n  const get = () => selector(getState())\n  const getResult = () => get().result\n\n  return ({\n    /* actions */\n    push: path => dispatch(push(path)),\n    replace: path => dispatch(replace(path)),\n    go: nbLocations => dispatch(go(nbLocations)),\n    goBack: () => dispatch(goBack()),\n    goForward: () => dispatch(goForward()),\n    block: callback => dispatch(block(callback)),\n    unblock: () => dispatch(unblock()),\n    /* route selectors */\n    get,\n    getRouteParam: key => get().params && get().params[key],\n    getQueryParam: key => get().query && get().query[key],\n    getResultParam: key => getResult() && getResult()[key],\n    getParentResultParam: key => getParentResultParam(getResult(), key),\n    isRoute: route => get().route === route,\n    isParentResultParam: (key, value) => isParentResultParam(getResult(), key, value),\n  })\n}\n\nconst init = selector => ({ getState, dispatch }) => {\n  const initialLocation = selector(getState())\n  if (initialLocation) dispatch(initializeCurrentLocation(initialLocation))\n}\n\nexport default (config, selector = state => state.router, path = 'router') => {\n  const {\n    reducer,\n    middleware,\n    enhancer,\n  } = isRouterImpl(config) ? config : routerForBrowser({ routes: config })\n\n  return {\n    getDriver: getDriver(selector),\n    getReducer: () => ({ reducer, path }),\n    getEnhancer: () => compose(enhancer, applyMiddleware(middleware)),\n    init: init(selector),\n  }\n}\n"],"names":["getParentResultParam","result","key","undefined","parent","isParentResultParam","value","isRouterImpl","reducer","middleware","enhancer","getDriver","dispatch","getState","get","selector","getResult","push","path","replace","go","nbLocations","goBack","goForward","block","callback","unblock","getRouteParam","params","getQueryParam","query","getResultParam","isRoute","route","init","initialLocation","initializeCurrentLocation","config","state","router","routerForBrowser","routes","getReducer","getEnhancer","compose","applyMiddleware"],"mappings":"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"}