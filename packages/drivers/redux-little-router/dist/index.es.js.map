{"version":3,"file":"index.es.js","sources":["../src/reduxLittleRouter.js"],"sourcesContent":["import { routerForBrowser, push, replace, go, goBack, goForward, block, unblock, initializeCurrentLocation } from 'redux-little-router'\nimport { compose, applyMiddleware } from 'redux'\n\nconst getParentResultParam = (result, key) => {\n  if (!result) return undefined\n  if (result[key]) return result[key]\n  return getParentResultParam(result.parent, key)\n}\n\nconst isParentResultParam = (result, key, value) => {\n  if (!result) return false\n  if (result[key] === value) return true\n  return isParentResultParam(result.parent, key, value)\n}\n\nconst isRouterImpl = ({ reducer, middleware, enhancer }) => reducer && enhancer && middleware\n\nconst getDriver = selector => ({ dispatch, getState }) => {\n  const get = () => selector(getState())\n  const getResult = () => get().result\n\n  return ({\n    /* actions */\n    push: path => dispatch(push(path)),\n    replace: path => dispatch(replace(path)),\n    go: nbLocations => dispatch(go(nbLocations)),\n    goBack: () => dispatch(goBack()),\n    goForward: () => dispatch(goForward()),\n    block: callback => dispatch(block(callback)),\n    unblock: () => dispatch(unblock()),\n    /* route selectors */\n    get,\n    getRouteParam: key => get().params && get().params[key],\n    getQueryParam: key => get().query && get().query[key],\n    getResultParam: key => getResult() && getResult()[key],\n    getParentResultParam: key => getParentResultParam(getResult(), key),\n    isRoute: route => get().route === route,\n    isParentResultParam: (key, value) => isParentResultParam(getResult(), key, value),\n  })\n}\n\nconst init = selector => ({ getState, dispatch }) => {\n  const initialLocation = selector(getState())\n  if (initialLocation) dispatch(initializeCurrentLocation(initialLocation))\n}\n\nexport default (config, selector = state => state.router, path = 'router') => {\n  const {\n    reducer,\n    middleware,\n    enhancer,\n  } = isRouterImpl(config) ? config : routerForBrowser({ routes: config })\n\n  return {\n    getDriver: getDriver(selector),\n    getReducer: () => ({ reducer, path }),\n    getEnhancer: () => compose(enhancer, applyMiddleware(middleware)),\n    init: init(selector),\n  }\n}\n"],"names":["getParentResultParam","result","key","undefined","parent","isParentResultParam","value","isRouterImpl","reducer","middleware","enhancer","getDriver","dispatch","getState","get","selector","getResult","push","path","replace","go","nbLocations","goBack","goForward","block","callback","unblock","params","query","route","init","initialLocation","initializeCurrentLocation","config","state","router","routerForBrowser","routes","compose","applyMiddleware"],"mappings":";;;AAGA,IAAMA,wBAAuB,SAAvBA,qBAAuB,CAACC,MAAD,EAASC,GAAT,EAAiB;MACxC,CAACD,MAAL,EAAa,OAAOE,SAAP;MACTF,OAAOC,GAAP,CAAJ,EAAiB,OAAOD,OAAOC,GAAP,CAAP;SACVF,sBAAqBC,OAAOG,MAA5B,EAAoCF,GAApC,CAAP;CAHF;;AAMA,IAAMG,uBAAsB,SAAtBA,oBAAsB,CAACJ,MAAD,EAASC,GAAT,EAAcI,KAAd,EAAwB;MAC9C,CAACL,MAAL,EAAa,OAAO,KAAP;MACTA,OAAOC,GAAP,MAAgBI,KAApB,EAA2B,OAAO,IAAP;SACpBD,qBAAoBJ,OAAOG,MAA3B,EAAmCF,GAAnC,EAAwCI,KAAxC,CAAP;CAHF;;AAMA,IAAMC,eAAe,SAAfA,YAAe;MAAGC,OAAH,QAAGA,OAAH;MAAYC,UAAZ,QAAYA,UAAZ;MAAwBC,QAAxB,QAAwBA,QAAxB;SAAuCF,WAAWE,QAAX,IAAuBD,UAA9D;CAArB;;AAEA,IAAME,YAAY,SAAZA,SAAY;SAAY,iBAA4B;QAAzBC,QAAyB,SAAzBA,QAAyB;QAAfC,QAAe,SAAfA,QAAe;;QAClDC,MAAM,SAANA,GAAM;aAAMC,SAASF,UAAT,CAAN;KAAZ;QACMG,YAAY,SAAZA,SAAY;aAAMF,MAAMb,MAAZ;KAAlB;;WAEQ;;YAEA;eAAQW,SAASK,KAAKC,IAAL,CAAT,CAAR;OAFA;eAGG;eAAQN,SAASO,QAAQD,IAAR,CAAT,CAAR;OAHH;UAIF;eAAeN,SAASQ,GAAGC,WAAH,CAAT,CAAf;OAJE;cAKE;eAAMT,SAASU,QAAT,CAAN;OALF;iBAMK;eAAMV,SAASW,WAAT,CAAN;OANL;aAOC;eAAYX,SAASY,MAAMC,QAAN,CAAT,CAAZ;OAPD;eAQG;eAAMb,SAASc,SAAT,CAAN;OARH;;cAAA;qBAWS;eAAOZ,MAAMa,MAAN,IAAgBb,MAAMa,MAAN,CAAazB,GAAb,CAAvB;OAXT;qBAYS;eAAOY,MAAMc,KAAN,IAAed,MAAMc,KAAN,CAAY1B,GAAZ,CAAtB;OAZT;sBAaU;eAAOc,eAAeA,YAAYd,GAAZ,CAAtB;OAbV;4BAcgB;eAAOF,sBAAqBgB,WAArB,EAAkCd,GAAlC,CAAP;OAdhB;eAeG;eAASY,MAAMe,KAAN,KAAgBA,KAAzB;OAfH;2BAgBe,6BAAC3B,GAAD,EAAMI,KAAN;eAAgBD,qBAAoBW,WAApB,EAAiCd,GAAjC,EAAsCI,KAAtC,CAAhB;;KAhBvB;GAJgB;CAAlB;;AAwBA,IAAMwB,OAAO,SAAPA,IAAO;SAAY,iBAA4B;QAAzBjB,QAAyB,SAAzBA,QAAyB;QAAfD,QAAe,SAAfA,QAAe;;QAC7CmB,kBAAkBhB,SAASF,UAAT,CAAxB;QACIkB,eAAJ,EAAqBnB,SAASoB,0BAA0BD,eAA1B,CAAT;GAFV;CAAb;;AAKA,yBAAe,UAACE,MAAD,EAA+D;MAAtDlB,QAAsD,uEAA3C;WAASmB,MAAMC,MAAf;GAA2C;MAApBjB,IAAoB,uEAAb,QAAa;;cAKxEX,aAAa0B,MAAb,IAAuBA,MAAvB,GAAgCG,iBAAiB,EAAEC,QAAQJ,MAAV,EAAjB,CALwC;MAE1EzB,OAF0E,SAE1EA,OAF0E;MAG1EC,UAH0E,SAG1EA,UAH0E;MAI1EC,QAJ0E,SAI1EA,QAJ0E;;SAOrE;eACMC,UAAUI,QAAV,CADN;gBAEO;aAAO,EAAEP,gBAAF,EAAWU,UAAX,EAAP;KAFP;iBAGQ;aAAMoB,QAAQ5B,QAAR,EAAkB6B,gBAAgB9B,UAAhB,CAAlB,CAAN;KAHR;UAICqB,KAAKf,QAAL;GAJR;CAPF;;;;"}